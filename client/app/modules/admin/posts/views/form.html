<form name="form">
  <div class="panel panel-default">
    <div class="panel-heading">
      <a href="" ui-sref="^.list" class="btn btn-xs btn-default"><i class="fa fa-arrow-left"></i></a>
      <span ng-show="!ctrl.post.id" translate>Add a new post</span>
      <span ng-show="ctrl.post.id" translate>Edit post</span>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-md-12">
<!--
          <ui-codemirror ui-codemirror-opts="ctrl.editorOptions" ng-model="ctrl.post.content"></ui-codemirror>
-->
          <textarea ui-tinymce="ctrl.tinymceOptions" ng-model="ctrl.post.content"></textarea>
          <br/>
          <label for="categories" translate>Categories</label>
          <ui-select id="categories" multiple  ng-model="ctrl.post.categories" title="Choose a category">
            <ui-select-match placeholder="Select a category">{{$item.name}}</ui-select-match>
            <ui-select-choices repeat="category in ctrl.categories | propsFilter: {name: $select.search}">
              <div ng-bind-html="category.name | highlight: $select.search"></div>
            </ui-select-choices>
          </ui-select>

          <label for="committees" translate>Committees</label>
          <ui-select id="committees" multiple  ng-model="ctrl.post.committees" title="Choose a committee">
            <ui-select-match placeholder="Select a Committee">{{$item.name}}</ui-select-match>
            <ui-select-choices repeat="category in ctrl.committees | propsFilter: {name: $select.search}">
              <div ng-bind-html="category.name | highlight: $select.search"></div>
            </ui-select-choices>
          </ui-select>

          <label for="mks" translate>Knesset Members</label>
          <ui-select id="mks" multiple  ng-model="ctrl.post.mks" title="Choose a Knesset member">
            <ui-select-match placeholder="Select a Knesset Member">{{$item.name}}</ui-select-match>
            <ui-select-choices repeat="mk in ctrl.mks | propsFilter: {name: $select.search}">
              <div ng-bind-html="mk.name | highlight: $select.search"></div>
            </ui-select-choices>
          </ui-select>

          <formly-form model="ctrl.post" fields="ctrl.formFields" options="ctrl.formOptions"></formly-form>
        </div>
      </div>
    </div>
    <div class="panel-footer">
      <button type="submit" class="btn btn-primary btn-success" ng-click="ctrl.submit()" ng-disabled="form.$invalid">
        Submit
      </button>
      <button type="button" class="btn btn-default" ng-click="ctrl.formOptions.resetModel()">Reset</button>
    </div>
  </div>
</form>
